<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Form Project</title>
</head>
<body>
    <header>
        <h1>Web Design Form</h1>
    </header>

    <main>
        <form action="submit.json" method="post" id="myForm">
            <fieldset>
                <legend>Personal Information</legend>

                <label for="first-name">First Name:</label>
                <input type="text" id="first-name" name="first-name" required>

                <label for="last-name">Last Name:</label>
                <input type="text" id="last-name" name="last-name" required>

                <label for="password">Password:</label>
                <input type="password" id="password" name="password" required>

                <label for="email">Email:</label>
                <input type="email" id="email" name="email" required>

                <label for="phone">Phone:</label>
                <input type="tel" id="phone" name="phone" required>

                <label for="dob">Date of Birth:</label>
                <input type="date" id="dob" name="dob">

                <label for="info">Additional Information:</label>
                <textarea id="info" name="info" rows="4"></textarea>

                <label for="terms">
                    <input type="checkbox" id="terms" name="terms" required>
                    Agree to Terms and Conditions
                </label>

                <label>Gender:</label>
                <label><input type="radio" name="gender" value="male"> Male</label>
                <label><input type="radio" name="gender" value="female"> Female</label>

                <label for="state">State:</label>
                <select id="state" name="state" required>
                    <option value="" selected disabled>Select State</option>
                    <option value="HI">Hawaii</option>
                    <option value="NY">New York</option>
                    <option value="CA">California</option>
                    <option value="TX">Texas</option>
                </select>

                <button type="submit">Submit</button>
            </fieldset>
        </form>
    </main>

    <footer>
        <p>&copy; 2024 Peter Kialo | All rights reserved</p>
    </footer>

    <script>
        document.getElementById("myForm").addEventListener("submit", function (event) {
            event.preventDefault();

            // Fetch values from the form
            const firstname = document.getElementById("first-name").value;
            const lastname = document.getElementById("last-name").value;

            // Validation
            if (!firstname || !lastname) {
                alert("First Name and Last Name cannot be blank.");
                return;
            }

            // Data to send
            const data = {
                firstName: firstname,
                lastName: lastname,
            };

            // Create an XMLHttpRequest
            const xhr = new XMLHttpRequest();
            xhr.open("POST", "submit.json", true);
            xhr.setRequestHeader("Content-Type", "application/json");

            xhr.onreadystatechange = function () {
                if (xhr.readyState === 4) {
                    if (xhr.status === 200) {
                        alert("Sent successfully!");
                    } else {
                        alert("There was an error submitting the form.");
                    }
                }
            };

            // Send the data as JSON
            xhr.send(JSON.stringify(data));
        });
    </script>

    <h3>Engagement</h3>
    <p><ul>
        <li>What is AJAX? AJAX, which stands for Asynchronous JavaScript and XML, is a web development technique that allows web pages to communicate with a web server asynchronously. 
            Why do you put your JS Code in a separate file? </li>
            <li>Separating JavaScript into its own file improves code organization by keeping HTML, CSS, and JavaScript distinct, making it easier to maintain and debug.</li>
        </ul></p>
</body>
</html>
